---
title: "Running kubernetes/kubernetes e2e-node Tests Locally"
date: 2025-12-10T22:09:53+09:00
draft: false
tags: [kubernetes]
---

```sh {title="Running e2e-node tests"}
$ KUBE_ROOT=$(pwd) make test-e2e-node TEST_ARGS='--kubelet-flags="--fail-swap-on=false"' FOCUS=Kubelet SKIP=container
```

The code below searches for the Kubernetes source code root directory. However, since your local setup often doesn't match this structure, specifying `KUBE_ROOT` makes it work.

{{< github-code "https://github.com/kubernetes/kubernetes/blob/221bf19ee03801523f2ed7e63a679e2ff8c916e1/test/utils/paths.go#L52-L64" >}}

The main documentation for running the tests is [here](https://github.com/kubernetes/community/blob/master/contributors/devel/sig-node/e2e-node-tests.md).
I installed and configured CNI as follows:
```shell {title="Installing CNI"}
$ CNI_VERSION=v1.5.1
$ wget https://github.com/containernetworking/plugins/releases/download/${CNI_VERSION}/cni-plugins-linux-amd64-${CNI_VERSION}.tgz
$ sudo tar -xvf cni-plugins-linux-amd64-${CNI_VERSION}.tgz -C /opt/cni/bin/
```

Logs are stored in `/tmp/_artifacts/$(date)/`. For example: `tail -f /tmp/_artifacts/240921T205914/kubelet.log`
